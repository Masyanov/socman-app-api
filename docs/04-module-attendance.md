# Модуль: Посещаемость

## Назначение

Учёт посещаемости тренировок: отметка присутствия игроков (в т.ч. через Telegram-бота), календарь явки и аналитика пропусков для тренера.

## Основные сущности

- **PresenceTraining** — факт присутствия игрока на тренировке (связь User ↔ Training, дата/время).  
- Связи: пользователь (игрок) — `User`, тренировка — `Training`; учёт ведётся по командам через привязку игроков к `team_code`.

## Ключевые маршруты (web)

| Метод | Маршрут | Контроллер | Описание |
|-------|---------|------------|----------|
| GET | `/attendance/calendar` | AttendanceCalendarController@index | Календарь посещаемости |

Маршрут доступен пользователям с ролью `coach` (middleware `auth`, `coach`).

## Поведение

- Отметка посещений может производиться через веб-интерфейс и через Telegram-бота (данные сохраняются в БД и отображаются в календаре посещаемости).  
- Календарь показывает, кто был на тренировках и кто отсутствовал; на основе этих данных строится аналитика пропусков.

## Модели и связи

- **PresenceTraining**: связь с User (игрок) и с Training.  
- **User**: метод `presence()` — все записи присутствия данного игрока.

## Связь с другими модулями

- Пользователи и команды: посещаемость учитывается по игрокам и их командам ([01-module-users](01-module-users.md), [02-module-teams](02-module-teams.md)).  
- Тренировки: календарь тренировок — основа для отметок присутствия ([03-module-trainings](03-module-trainings.md)).  
- Telegram: отметка посещения из бота ([08-module-telegram](08-module-telegram.md)).
